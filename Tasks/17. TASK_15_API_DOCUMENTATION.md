# Task 15: API Documentation with Swagger/OpenAPI

## üìã Task Overview

**Difficulty**: üü¢ **BEGINNER-INTERMEDIATE**  
**Estimated Time**: 2-3 days  
**Priority**: MEDIUM  
**Category**: Documentation & Developer Experience

### Objective

Implement comprehensive API documentation using Swagger/OpenAPI to provide interactive API documentation, enable API testing directly from browser, generate type-safe client SDKs, improve developer onboarding, and facilitate API versioning and collaboration between frontend and backend teams.

### Learning Outcomes

- Master Swagger/OpenAPI specification
- Document REST API endpoints
- Generate interactive API docs
- Create request/response schemas
- Implement authentication in docs
- Auto-generate TypeScript types
- Version API documentation
- Enable API testing playground

---

## üéØ Requirements

### Functional Requirements

1. **Documentation Coverage**
   | Module | Endpoints | Priority | Status |
   |--------|-----------|----------|--------|
   | Authentication | Login, Register, Refresh | üî¥ HIGH | Required |
   | Users | CRUD operations | üî¥ HIGH | Required |
   | Doctors | List, Detail, Update | üî¥ HIGH | Required |
   | Appointments | Book, List, Cancel | üî¥ HIGH | Required |
   | Prescriptions | CRUD operations | üü† MEDIUM | Required |
   | Payments | Create, Verify | üü† MEDIUM | Required |

2. **Documentation Features**

   - Interactive API explorer (Try it out)
   - Request/response examples
   - Authentication flows
   - Error response codes
   - Schema definitions
   - Enums and constants
   - Pagination details
   - File upload endpoints

3. **Developer Experience**
   - Auto-generated from code
   - Type-safe schemas
   - Searchable documentation
   - Downloadable OpenAPI spec
   - Code samples in multiple languages
   - Postman collection export

### Technical Requirements

1. **Technology Stack**

   - **Backend**: swagger-jsdoc, swagger-ui-express
   - **Frontend**: Next.js API routes (optional)
   - **Validation**: Zod schemas ‚Üí OpenAPI
   - **Type Generation**: openapi-typescript

2. **Documentation Standards**

   - OpenAPI 3.0 specification
   - RESTful API conventions
   - Consistent naming patterns
   - Comprehensive descriptions
   - Example values

3. **Performance**
   - Swagger UI loads in <2 seconds
   - Minimal overhead in production
   - Cached schema generation

---

## üèóÔ∏è Documentation Architecture

### Swagger Flow

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Express Backend API                        ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇ  Route Files with JSDoc Comments           ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ  /**                                        ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ   * @swagger                                ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ   * /api/v1/doctor:                         ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ   *   get:                                  ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ   *     summary: Get all doctors            ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ   */                                        ‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ                    ‚îÇ                                     ‚îÇ
‚îÇ                    ‚ñº                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇ  swagger-jsdoc                              ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ  - Scans files for @swagger comments       ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ  - Generates OpenAPI 3.0 spec               ‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ                    ‚îÇ                                     ‚îÇ
‚îÇ                    ‚ñº                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇ  Swagger UI Express                         ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ  - Serves interactive docs at /api-docs     ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ  - Enables "Try it out" feature             ‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
                    ‚îÇ (OpenAPI JSON)
                    ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                       ‚îÇ
        ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Postman       ‚îÇ    ‚îÇ  TypeScript    ‚îÇ
‚îÇ  Collection    ‚îÇ    ‚îÇ  SDK Generator ‚îÇ
‚îÇ  (Import)      ‚îÇ    ‚îÇ  (Types)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìù Implementation Guide

### Phase 1: Swagger Setup

#### Step 1.1: Install Dependencies

```bash
cd backend
pnpm install swagger-jsdoc swagger-ui-express
pnpm install -D @types/swagger-jsdoc @types/swagger-ui-express
```

#### Step 1.2: Create Swagger Configuration

**File**: `backend/src/app/config/swagger.ts`

```typescript
import swaggerJsdoc from "swagger-jsdoc";
import config from "./index";

const options: swaggerJsdoc.Options = {
  definition: {
    openapi: "3.0.0",
    info: {
      title: "PH-HealthCare API",
      version: "1.0.0",
      description:
        "Comprehensive healthcare management system API documentation",
      contact: {
        name: "PH-HealthCare Team",
        email: "support@phhealth.com",
        url: "https://phhealth.com",
      },
      license: {
        name: "MIT",
        url: "https://opensource.org/licenses/MIT",
      },
    },
    servers: [
      {
        url:
          config.env === "production"
            ? "https://api.phhealth.com/api/v1"
            : `http://localhost:${config.port}/api/v1`,
        description:
          config.env === "production"
            ? "Production server"
            : "Development server",
      },
    ],
    components: {
      securitySchemes: {
        bearerAuth: {
          type: "http",
          scheme: "bearer",
          bearerFormat: "JWT",
          description: "Enter your JWT token",
        },
      },
      schemas: {
        Error: {
          type: "object",
          properties: {
            success: {
              type: "boolean",
              example: false,
            },
            message: {
              type: "string",
              example: "Error message",
            },
            errorDetails: {
              type: "object",
              nullable: true,
            },
          },
        },
        PaginationMeta: {
          type: "object",
          properties: {
            page: {
              type: "number",
              example: 1,
            },
            limit: {
              type: "number",
              example: 10,
            },
            total: {
              type: "number",
              example: 100,
            },
            totalPages: {
              type: "number",
              example: 10,
            },
          },
        },
      },
    },
    security: [
      {
        bearerAuth: [],
      },
    ],
    tags: [
      {
        name: "Authentication",
        description: "Authentication and authorization endpoints",
      },
      {
        name: "Users",
        description: "User management endpoints",
      },
      {
        name: "Doctors",
        description: "Doctor profile and management",
      },
      {
        name: "Patients",
        description: "Patient profile and management",
      },
      {
        name: "Appointments",
        description: "Appointment booking and management",
      },
      {
        name: "Schedules",
        description: "Doctor schedule management",
      },
      {
        name: "Prescriptions",
        description: "Medical prescription management",
      },
      {
        name: "Payments",
        description: "Payment processing",
      },
      {
        name: "Reviews",
        description: "Doctor reviews and ratings",
      },
    ],
  },
  apis: [
    "./src/app/modules/**/*.routes.ts",
    "./src/app/modules/**/*.swagger.ts",
  ],
};

const swaggerSpec = swaggerJsdoc(options);

export default swaggerSpec;
```

#### Step 1.3: Setup Swagger UI Route

**File**: `backend/src/app.ts`

```typescript
import express, { Application } from "express";
import swaggerUi from "swagger-ui-express";
import swaggerSpec from "./app/config/swagger";

const app: Application = express();

// ... other middleware ...

// Swagger documentation (only in non-production)
if (process.env.NODE_ENV !== "production") {
  app.use(
    "/api-docs",
    swaggerUi.serve,
    swaggerUi.setup(swaggerSpec, {
      explorer: true,
      customCss: ".swagger-ui .topbar { display: none }",
      customSiteTitle: "PH-HealthCare API Docs",
    })
  );

  // Serve raw OpenAPI spec
  app.get("/api-docs.json", (req, res) => {
    res.setHeader("Content-Type", "application/json");
    res.send(swaggerSpec);
  });
}

export default app;
```

---

### Phase 2: Document Endpoints

#### Step 2.1: Authentication Endpoints

**File**: `backend/src/app/modules/Auth/auth.swagger.ts`

```typescript
/**
 * @swagger
 * components:
 *   schemas:
 *     LoginRequest:
 *       type: object
 *       required:
 *         - email
 *         - password
 *       properties:
 *         email:
 *           type: string
 *           format: email
 *           example: patient@example.com
 *         password:
 *           type: string
 *           format: password
 *           example: password123
 *
 *     LoginResponse:
 *       type: object
 *       properties:
 *         success:
 *           type: boolean
 *           example: true
 *         message:
 *           type: string
 *           example: Login successful
 *         data:
 *           type: object
 *           properties:
 *             accessToken:
 *               type: string
 *               example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
 *             refreshToken:
 *               type: string
 *               example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
 *             user:
 *               type: object
 *               properties:
 *                 id:
 *                   type: string
 *                   example: user-123
 *                 email:
 *                   type: string
 *                   example: patient@example.com
 *                 role:
 *                   type: string
 *                   enum: [ADMIN, DOCTOR, PATIENT]
 *                   example: PATIENT
 */

/**
 * @swagger
 * /auth/login:
 *   post:
 *     tags:
 *       - Authentication
 *     summary: User login
 *     description: Authenticate user and return JWT tokens
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             $ref: '#/components/schemas/LoginRequest'
 *     responses:
 *       200:
 *         description: Login successful
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/LoginResponse'
 *       401:
 *         description: Invalid credentials
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/Error'
 */

/**
 * @swagger
 * /auth/refresh-token:
 *   post:
 *     tags:
 *       - Authentication
 *     summary: Refresh access token
 *     description: Generate new access token using refresh token
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             required:
 *               - refreshToken
 *             properties:
 *               refreshToken:
 *                 type: string
 *                 example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
 *     responses:
 *       200:
 *         description: Token refreshed successfully
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 success:
 *                   type: boolean
 *                   example: true
 *                 data:
 *                   type: object
 *                   properties:
 *                     accessToken:
 *                       type: string
 *       401:
 *         description: Invalid refresh token
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/Error'
 */

/**
 * @swagger
 * /auth/logout:
 *   post:
 *     tags:
 *       - Authentication
 *     summary: User logout
 *     description: Logout user and invalidate tokens
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: Logout successful
 *       401:
 *         description: Unauthorized
 */
```

#### Step 2.2: Doctor Endpoints

**File**: `backend/src/app/modules/Doctor/doctor.swagger.ts`

```typescript
/**
 * @swagger
 * components:
 *   schemas:
 *     Doctor:
 *       type: object
 *       properties:
 *         id:
 *           type: string
 *           example: doctor-123
 *         name:
 *           type: string
 *           example: Dr. John Smith
 *         email:
 *           type: string
 *           format: email
 *           example: john@example.com
 *         profilePhoto:
 *           type: string
 *           format: uri
 *           example: https://cloudinary.com/photo.jpg
 *         contactNumber:
 *           type: string
 *           example: +1234567890
 *         address:
 *           type: string
 *           example: 123 Main St, City
 *         registrationNumber:
 *           type: string
 *           example: REG123456
 *         experience:
 *           type: number
 *           example: 10
 *         gender:
 *           type: string
 *           enum: [MALE, FEMALE]
 *           example: MALE
 *         appointmentFee:
 *           type: number
 *           example: 500
 *         qualification:
 *           type: string
 *           example: MBBS, MD
 *         currentWorkingPlace:
 *           type: string
 *           example: City Hospital
 *         designation:
 *           type: string
 *           example: Senior Consultant
 *         averageRating:
 *           type: number
 *           format: float
 *           example: 4.5
 *         isDeleted:
 *           type: boolean
 *           example: false
 *         createdAt:
 *           type: string
 *           format: date-time
 *         updatedAt:
 *           type: string
 *           format: date-time
 */

/**
 * @swagger
 * /doctor:
 *   get:
 *     tags:
 *       - Doctors
 *     summary: Get all doctors
 *     description: Retrieve paginated list of doctors with optional filters
 *     parameters:
 *       - in: query
 *         name: page
 *         schema:
 *           type: integer
 *           default: 1
 *         description: Page number
 *       - in: query
 *         name: limit
 *         schema:
 *           type: integer
 *           default: 10
 *         description: Items per page
 *       - in: query
 *         name: searchTerm
 *         schema:
 *           type: string
 *         description: Search by name or email
 *       - in: query
 *         name: specialties
 *         schema:
 *           type: string
 *         description: Filter by specialty ID
 *       - in: query
 *         name: sortBy
 *         schema:
 *           type: string
 *           enum: [averageRating, appointmentFee, experience, createdAt]
 *           default: createdAt
 *         description: Sort field
 *       - in: query
 *         name: sortOrder
 *         schema:
 *           type: string
 *           enum: [asc, desc]
 *           default: desc
 *         description: Sort order
 *     responses:
 *       200:
 *         description: Doctors retrieved successfully
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 success:
 *                   type: boolean
 *                   example: true
 *                 message:
 *                   type: string
 *                   example: Doctors retrieved successfully
 *                 data:
 *                   type: array
 *                   items:
 *                     $ref: '#/components/schemas/Doctor'
 *                 meta:
 *                   $ref: '#/components/schemas/PaginationMeta'
 */

/**
 * @swagger
 * /doctor/{id}:
 *   get:
 *     tags:
 *       - Doctors
 *     summary: Get doctor by ID
 *     description: Retrieve detailed information about a specific doctor
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         schema:
 *           type: string
 *         description: Doctor ID
 *     responses:
 *       200:
 *         description: Doctor retrieved successfully
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 success:
 *                   type: boolean
 *                   example: true
 *                 data:
 *                   $ref: '#/components/schemas/Doctor'
 *       404:
 *         description: Doctor not found
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/Error'
 *
 *   patch:
 *     tags:
 *       - Doctors
 *     summary: Update doctor
 *     description: Update doctor information (Admin/Doctor only)
 *     security:
 *       - bearerAuth: []
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         schema:
 *           type: string
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             properties:
 *               name:
 *                 type: string
 *               appointmentFee:
 *                 type: number
 *               qualification:
 *                 type: string
 *               experience:
 *                 type: number
 *     responses:
 *       200:
 *         description: Doctor updated successfully
 *       401:
 *         description: Unauthorized
 *       403:
 *         description: Forbidden
 *       404:
 *         description: Doctor not found
 *
 *   delete:
 *     tags:
 *       - Doctors
 *     summary: Delete doctor
 *     description: Soft delete doctor (Admin only)
 *     security:
 *       - bearerAuth: []
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         schema:
 *           type: string
 *     responses:
 *       200:
 *         description: Doctor deleted successfully
 *       401:
 *         description: Unauthorized
 *       403:
 *         description: Forbidden
 *       404:
 *         description: Doctor not found
 */
```

#### Step 2.3: Appointment Endpoints

**File**: `backend/src/app/modules/Appointment/appointment.swagger.ts`

```typescript
/**
 * @swagger
 * components:
 *   schemas:
 *     Appointment:
 *       type: object
 *       properties:
 *         id:
 *           type: string
 *         patientId:
 *           type: string
 *         doctorId:
 *           type: string
 *         scheduleId:
 *           type: string
 *         videoCallingId:
 *           type: string
 *         status:
 *           type: string
 *           enum: [SCHEDULED, INPROGRESS, COMPLETED, CANCELLED]
 *         paymentStatus:
 *           type: string
 *           enum: [PAID, UNPAID]
 *         createdAt:
 *           type: string
 *           format: date-time
 */

/**
 * @swagger
 * /appointment:
 *   post:
 *     tags:
 *       - Appointments
 *     summary: Book appointment
 *     description: Create a new appointment (Patient only)
 *     security:
 *       - bearerAuth: []
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             required:
 *               - doctorId
 *               - scheduleId
 *             properties:
 *               doctorId:
 *                 type: string
 *                 example: doctor-123
 *               scheduleId:
 *                 type: string
 *                 example: schedule-456
 *     responses:
 *       201:
 *         description: Appointment created successfully
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 success:
 *                   type: boolean
 *                   example: true
 *                 data:
 *                   $ref: '#/components/schemas/Appointment'
 *       400:
 *         description: Invalid request
 *       401:
 *         description: Unauthorized
 *
 *   get:
 *     tags:
 *       - Appointments
 *     summary: Get appointments
 *     description: Get user's appointments (filtered by role)
 *     security:
 *       - bearerAuth: []
 *     parameters:
 *       - in: query
 *         name: status
 *         schema:
 *           type: string
 *           enum: [SCHEDULED, INPROGRESS, COMPLETED, CANCELLED]
 *       - in: query
 *         name: page
 *         schema:
 *           type: integer
 *           default: 1
 *       - in: query
 *         name: limit
 *         schema:
 *           type: integer
 *           default: 10
 *     responses:
 *       200:
 *         description: Appointments retrieved successfully
 *       401:
 *         description: Unauthorized
 */

/**
 * @swagger
 * /appointment/{id}:
 *   get:
 *     tags:
 *       - Appointments
 *     summary: Get appointment by ID
 *     security:
 *       - bearerAuth: []
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         schema:
 *           type: string
 *     responses:
 *       200:
 *         description: Appointment retrieved
 *       404:
 *         description: Appointment not found
 *
 *   patch:
 *     tags:
 *       - Appointments
 *     summary: Update appointment status
 *     security:
 *       - bearerAuth: []
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         schema:
 *           type: string
 *     requestBody:
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             properties:
 *               status:
 *                 type: string
 *                 enum: [SCHEDULED, INPROGRESS, COMPLETED, CANCELLED]
 *     responses:
 *       200:
 *         description: Appointment updated
 *       404:
 *         description: Appointment not found
 */
```

---

### Phase 3: Export OpenAPI Spec

#### Step 3.1: Generate TypeScript Types

Install openapi-typescript:

```bash
cd frontend
npm install -D openapi-typescript
```

Add script to package.json:

```json
{
  "scripts": {
    "generate-types": "openapi-typescript http://localhost:5000/api-docs.json -o src/types/api.d.ts"
  }
}
```

#### Step 3.2: Create Postman Collection Script

**File**: `backend/scripts/generate-postman.js`

```javascript
const fs = require("fs");
const swaggerSpec = require("../dist/app/config/swagger").default;

const postmanCollection = {
  info: {
    name: "PH-HealthCare API",
    description: swaggerSpec.info.description,
    schema:
      "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
  },
  item: [],
};

// Convert OpenAPI to Postman format
// (Simplified - use openapi-to-postmanv2 for full conversion)

fs.writeFileSync(
  "./postman-collection.json",
  JSON.stringify(postmanCollection, null, 2)
);

console.log("‚úÖ Postman collection generated!");
```

---

## ‚úÖ Testing Checklist

### Documentation

- [ ] All endpoints documented
- [ ] Request/response schemas defined
- [ ] Authentication documented
- [ ] Error responses included
- [ ] Examples provided
- [ ] Tags organized properly

### Swagger UI

- [ ] Swagger UI accessible at /api-docs
- [ ] "Try it out" feature works
- [ ] Authentication works in UI
- [ ] Responses display correctly
- [ ] Search functionality works

### Integration

- [ ] OpenAPI spec downloadable
- [ ] TypeScript types generated
- [ ] Postman collection exportable
- [ ] No errors in console

---

## üéØ Acceptance Criteria

1. ‚úÖ Swagger UI configured and accessible
2. ‚úÖ All major endpoints documented
3. ‚úÖ Request/response schemas defined
4. ‚úÖ Authentication flow documented
5. ‚úÖ Examples provided for all endpoints
6. ‚úÖ OpenAPI 3.0 compliant
7. ‚úÖ TypeScript types auto-generated
8. ‚úÖ Try it out feature working
9. ‚úÖ Error responses documented
10. ‚úÖ Organized with tags

---

## üìñ Resources

- [Swagger Documentation](https://swagger.io/docs/)
- [OpenAPI Specification](https://swagger.io/specification/)
- [swagger-jsdoc](https://github.com/Surnet/swagger-jsdoc)
- [swagger-ui-express](https://github.com/scottie1984/swagger-ui-express)

---

**Task Status**: üìù Ready for implementation  
**Estimated Completion**: 2-3 days  
**Impact**: Better developer experience, faster onboarding, API testing playground

---

_Good documentation is a love letter to your future self._ üìö
